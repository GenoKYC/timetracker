<div class="flex justify-content-center align-items-center h-full">
    <p-card [style]="{ width: '50rem', overflow: 'hidden' }">
        <ng-template #header>

            <div style="position: relative; width: 300px; height: 225px;">
                <video #video autoplay playsinline width="300" height="225" [hidden]="!cameraStarted"></video>

                <!-- Overlay Message -->
                <div
                    *ngIf="!cameraStarted"
                    (click)="startCamera()"
                    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;
                        background-color: rgba(0, 0, 0, 0.6); color: white;
                        display: flex; align-items: center; justify-content: center;
                        cursor: pointer; text-align: center;">
                    <span *ngIf="cameraError">Camera failed to start. Click to retry.</span>
                    <span *ngIf="!cameraError">Camera not started. Click to start.</span>
                </div>
              
            </div>
              <br />
                <canvas #canvas width="300" height="225" hidden></canvas>
                <br />
                <img [src]="timeInImage" *ngIf="timeInImage" />
                <img [src]="timeOutImage" *ngIf="timeOutImage" />

        </ng-template>
        <ng-template #title> Christan Marave </ng-template>
        <ng-template #subtitle>Time In {{timeInDateTime}} / Time Out {{timeOutDateTime}} </ng-template>
        
        <ng-template #footer>
            <div class="flex gap-4 mt-1">
                <p-button 
                    label="Cancel" 
                    severity="secondary" 
                    class="w-full" 
                    [outlined]="true"  
                    icon="pi pi-cancel"
                    (click)="stopCamera()   " 
                    styleClass="w-full" />
                <p-button
                    severity="info" 
                    label="Time In" 
                    (click)="timeIn()" 
                    icon="pi pi-camera" 
                    iconPos="left" 
                    class="w-full" 
                    styleClass="w-full" />
                 <p-button
                    severity="info" 
                    label="Time Out" 
                    (click)="timeOut()" 
                    icon="pi pi-camera" 
                    iconPos="left" 
                    class="w-full" 
                    styleClass="w-full" />
            </div>
        </ng-template>
    </p-card>
</div>